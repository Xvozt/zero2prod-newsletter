  name: zero2prod-newsletter
  region: fra
  services:
    - name: zero2prod
      dockerfile_path: Dockerfile
      source_dir: .
      github:
        branch: main
        deploy_on_push: true
        repo: Xvozt/zero2prod-newsletter
      health_check:
        http_path: /health_check
      http_port: 8000
      instance_count: 1
      instance_size_slug: basic-xxs
      routes:
        - path: /
      envs:
        - key: APP_DATABASE__USERNAME
          scope: RUN_TIME
          value: ${newsletter.USERNAME}
        - key: APP_DATABASE__PASSWORD
          scope: RUN_TIME
          value: ${newsletter.PASSWORD}
        - key: APP_DATABASE__HOST
          scope: RUN_TIME
          value: ${newsletter.HOSTNAME}
        - key: APP_DATABASE__PORT
          scope: RUN_TIME
          value: ${newsletter.PORT}
        - key: APP_DATABASE__DB_NAME
          scope: RUN_TIME
          value: ${newsletter.DATABASE}
  databases:
    - name: newsletter
      engine: PG
      version: "15"
      production: false
